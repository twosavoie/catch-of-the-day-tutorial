{"ast":null,"code":"import _objectSpread from\"/Users/lisasavoie/Desktop/React-For-Beginners-Starter-Files-master/catch-of-the-day/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/lisasavoie/Desktop/React-For-Beginners-Starter-Files-master/catch-of-the-day/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/lisasavoie/Desktop/React-For-Beginners-Starter-Files-master/catch-of-the-day/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/lisasavoie/Desktop/React-For-Beginners-Starter-Files-master/catch-of-the-day/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/lisasavoie/Desktop/React-For-Beginners-Starter-Files-master/catch-of-the-day/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import Header from'./Header';import Order from'./Order';import Inventory from'./Inventory';import sampleFishes from'../sample-fishes';import Fish from'./Fish';import base from'../base';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={fishes:{},order:{}};_this.addFish=function(fish){// take a copy of the existing state\nvar fishes=_objectSpread({},_this.state.fishes);//add our new fish from the AddFishForm component to the fishes variable\nfishes[\"fish\".concat(Date.now())]=fish;// set the new fishes object to state with the existing setState API\n_this.setState({fishes:fishes});// could pass fishes: fishes Since they are the same we can write it this way\n};_this.updateFish=function(key,updatedFish){// take copy of current state\nvar fishes=_objectSpread({},_this.state.fishes);// update that state\nfishes[key]=updatedFish;// set thtat to state\n_this.setState({fishes:fishes});};_this.deleteFish=function(key){// take a copy of state\nvar fishes=_objectSpread({},_this.state.fishes);// update the state\nfishes[key]=null;// update state\n_this.setState({fishes:fishes});};_this.loadSampleFishes=function(){_this.setState({fishes:sampleFishes});};_this.addToOrder=function(key){// take a copy of state\nvar order=_objectSpread({},_this.state.order);// either add to the order or update the number in order\norder[key]=order[key]+1||1;// call setState to update our state object\n_this.setState({order:order});};_this.removeFromOrder=function(key){// take a copy of state\nvar order=_objectSpread({},_this.state.order);// either add to the order or update the number in order\ndelete order[key];// call setState to update our state object\n_this.setState({order:order});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var params=this.props.match.params;// first reinstate our local storage\nvar localStorageRef=localStorage.getItem(params.storeId);if(localStorageRef){this.setState({order:JSON.parse(localStorageRef)});}this.ref=base.syncState(\"\".concat(params.storeId,\"/fishes\"),{context:this,state:'fishes'});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){localStorage.setItem(this.props.match.params.storeId,JSON.stringify(this.state.order));}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){base.removeBinding(this.ref);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"catch-of-the-day\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"menu\",children:[/*#__PURE__*/_jsx(Header,{tagline:\"Fresh Seafood Market\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"fishes\",children:Object.keys(this.state.fishes).map(function(key){return/*#__PURE__*/_jsx(Fish,{index:key,details:_this2.state.fishes[key],addToOrder:_this2.addToOrder},key);})})]}),/*#__PURE__*/_jsx(Order,{fishes:this.state.fishes,order:this.state.order,removeFromOrder:this.removeFromOrder}),/*#__PURE__*/_jsx(Inventory,{addFish:this.addFish,updateFish:this.updateFish,deleteFish:this.deleteFish,loadSampleFishes:this.loadSampleFishes,fishes:this.state.fishes,storeId:this.props.match.params.storeId})]});}}]);return App;}(React.Component);export default App;","map":{"version":3,"names":["React","Header","Order","Inventory","sampleFishes","Fish","base","App","state","fishes","order","addFish","fish","Date","now","setState","updateFish","key","updatedFish","deleteFish","loadSampleFishes","addToOrder","removeFromOrder","params","props","match","localStorageRef","localStorage","getItem","storeId","JSON","parse","ref","syncState","context","setItem","stringify","removeBinding","Object","keys","map","Component"],"sources":["/Users/lisasavoie/Desktop/React-For-Beginners-Starter-Files-master/catch-of-the-day/src/components/App.js"],"sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Header from './Header';\nimport Order from './Order';\nimport Inventory from './Inventory';\nimport sampleFishes from '../sample-fishes';\nimport Fish from './Fish';\nimport base from '../base';\n\nclass App extends React.Component {\n  // use a property for state instead of a contructor\n  // start with what state is when the app starts\n  state = {\n    fishes: {},\n    order: {}\n  };\n  static propTypes = {\n    match: PropTypes.object\n  }\n  componentDidMount() {\n    const { params } = this.props.match;\n    // first reinstate our local storage\n    const localStorageRef = localStorage.getItem(params.storeId);\n    if(localStorageRef) {\n      this.setState({ order: JSON.parse(localStorageRef)});\n    }\n    this.ref = base.syncState(`${params.storeId}/fishes`, {\n      context: this,\n      state: 'fishes',\n    });\n  }\n  componentDidUpdate() {\n    localStorage.setItem(this.props.match.params.storeId, JSON.stringify(this.state.order));\n  }\n  componentWillUnmount() {\n    base.removeBinding(this.ref);\n  }\n  addFish = fish => {\n    // take a copy of the existing state\n    const fishes = { ...this.state.fishes };\n    //add our new fish from the AddFishForm component to the fishes variable\n    fishes[`fish${Date.now()}`] = fish;\n    // set the new fishes object to state with the existing setState API\n    this.setState({ fishes });\n    // could pass fishes: fishes Since they are the same we can write it this way\n  };\n  updateFish = (key, updatedFish) => {\n    // take copy of current state\n    const fishes = { ...this.state.fishes };\n    // update that state\n    fishes[key] = updatedFish;\n    // set thtat to state\n    this.setState({ fishes });\n  };\n  deleteFish = key => {\n    // take a copy of state\n    const fishes = { ...this.state.fishes };\n    // update the state\n    fishes[key] = null;\n    // update state\n    this.setState({ fishes });\n  };\n  loadSampleFishes = () => {\n    this.setState({ fishes: sampleFishes });\n  };\n  addToOrder = key => {\n    // take a copy of state\n    const order = { ...this.state.order };\n    // either add to the order or update the number in order\n    order[key] = order[key] + 1 || 1;\n    // call setState to update our state object\n    this.setState({ order });\n  }\n  removeFromOrder = key => {\n    // take a copy of state\n    const order = { ...this.state.order };\n    // either add to the order or update the number in order\n    delete order[key]; \n    // call setState to update our state object\n    this.setState({ order });\n  }\n  render() {\n    return (\n      <div className=\"catch-of-the-day\">\n        <div className=\"menu\">\n          <Header tagline=\"Fresh Seafood Market\" />\n          <ul className=\"fishes\">\n            {Object.keys(this.state.fishes).map(key => (\n              <Fish\n                key={key}\n                index={key}\n                details={this.state.fishes[key]}\n                addToOrder={this.addToOrder}\n              />\n            ))}\n          </ul>\n        </div>\n        <Order\n          fishes={this.state.fishes}\n          order={this.state.order}\n          removeFromOrder={this.removeFromOrder}\n        />\n        <Inventory\n          addFish={this.addFish}\n          updateFish={this.updateFish}\n          deleteFish={this.deleteFish}\n          loadSampleFishes={this.loadSampleFishes}\n          fishes={this.state.fishes}\n          storeId={this.props.match.params.storeId}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}